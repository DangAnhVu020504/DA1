<nav>
  <a routerLink="/home" class="nav-brand">ğŸ¢ BatDongSanVIP</a>
  <div class="nav-links">
    <!-- Admin Link -->
    <a *ngIf="isAdmin$ | async" routerLink="/admin/dashboard" routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }">
      ğŸ“Š Dashboard
    </a>
    <a *ngIf="isAdmin$ | async" routerLink="/admin/users" routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }">
      ğŸ‘¥ NgÆ°á»i dÃ¹ng
    </a>
    <a *ngIf="isAdmin$ | async" routerLink="/admin/properties" routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }">
      ğŸ“‹ Tin Ä‘Äƒng
    </a>
    <a *ngIf="isAdmin$ | async" routerLink="/admin/comments" routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }">
      ğŸ’¬ BÃ¬nh luáº­n
    </a>
    <a *ngIf="isAdmin$ | async" routerLink="/admin/appointments" routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }">
      ğŸ“… Lá»‹ch háº¹n
    </a>

    <!-- User Logged In -->
    <div *ngIf="currentUser$ | async as user; else guestNav" class="user-group">
      <!-- Property Management Link -->
      <a routerLink="/my-properties" class="property-menu-btn" title="Quáº£n lÃ½ BÄS">
        ğŸ  Quáº£n lÃ½ BDS
      </a>

      <!-- Notification Bell -->
      <div class="notification-wrapper">
        <button class="notification-bell" (click)="toggleNotifications()" title="ThÃ´ng bÃ¡o lá»‹ch háº¹n">
          ğŸ””
          <span *ngIf="notificationCount > 0" class="notification-badge">{{ notificationCount }}</span>
        </button>

        <!-- Notification Dropdown -->
        <div *ngIf="showNotifications" class="notification-dropdown">
          <div class="notification-header">
            <h4>ğŸ“… Lá»‹ch háº¹n cá»§a báº¡n</h4>
            <button class="close-btn" (click)="closeNotifications()">âœ•</button>
          </div>
          <div class="notification-list">
            <div *ngIf="notifications.length === 0" class="no-notifications">
              ChÆ°a cÃ³ lá»‹ch háº¹n nÃ o
            </div>
            <div *ngFor="let apt of notifications" class="notification-item" [class.pending]="apt.status === 'pending'">
              <div class="notification-status">
                <span *ngIf="apt.status === 'pending'" class="status-badge pending">Chá» xÃ¡c nháº­n</span>
                <span *ngIf="apt.status === 'confirmed'" class="status-badge confirmed">ÄÃ£ xÃ¡c nháº­n</span>
                <span *ngIf="apt.status === 'completed'" class="status-badge completed">HoÃ n thÃ nh</span>
              </div>
              <div class="notification-content">
                <p class="apt-property">ğŸ  {{ apt.listing?.property?.title || apt.listing?.title || 'N/A' }}</p>
                <p class="apt-name">ğŸ‘¤ {{ apt.fullName }}</p>
                <p class="apt-phone">ğŸ“± {{ apt.phone }}</p>
                <p class="apt-date">ğŸ“… {{ apt.scheduledAt | date:'dd/MM/yyyy' }}</p>
                <p *ngIf="apt.message" class="apt-message">ğŸ’¬ {{ apt.message }}</p>
                <button *ngIf="apt.status === 'pending'" class="btn-confirm" (click)="confirmAppointment(apt.id!)">
                  âœ… XÃ¡c nháº­n
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <span class="welcome-text">Xin chÃ o, {{ user.fullName }}</span>
      <a routerLink="/profile" class="avatar-link" title="Há»“ sÆ¡">
        <img [src]="user.avatar ? 'http://localhost:3000' + user.avatar : 'assets/default-avatar.png'"
          class="nav-avatar" alt="Avatar">
      </a>
      <button (click)="logout()" class="btn-logout">ğŸšª ÄÄƒng xuáº¥t</button>
    </div>

    <!-- Guest -->
    <ng-template #guestNav>
      <a routerLink="/login" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        ğŸ“ ÄÄƒng Nháº­p
      </a>
      <a routerLink="/register" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        âœï¸ ÄÄƒng KÃ½
      </a>
    </ng-template>
  </div>
</nav>

<main>
  <router-outlet></router-outlet>
</main>

<!-- Footer -->
<footer class="footer">
  <!-- Top Bar -->
  <div class="footer-top">
    <div class="footer-brand">
      <span class="brand-icon">ğŸ¢</span>
      <span class="brand-name">BatDongSanVIP</span>
    </div>
    <div class="footer-contact-info">
      <div class="contact-item">
        <span class="contact-icon">ğŸ“</span>
        <div>
          <span class="contact-label">Hotline</span>
          <span class="contact-value">1900 1881</span>
        </div>
      </div>
      <div class="contact-item">
        <span class="contact-icon">ğŸ“§</span>
        <div>
          <span class="contact-label">Há»— trá»£ khÃ¡ch hÃ ng</span>
          <span class="contact-value">support&#64;bdsvip.com.vn</span>
        </div>
      </div>
      <div class="contact-item">
        <span class="contact-icon">ğŸ’¬</span>
        <div>
          <span class="contact-label">ChÄƒm sÃ³c khÃ¡ch hÃ ng</span>
          <span class="contact-value">hotro&#64;bdsvip.com.vn</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Footer -->
  <div class="footer-main">
    <div class="footer-column">
      <h4>CÃ”NG TY BÄS VIP VIá»†T NAM</h4>
      <p>ğŸ“ Táº§ng 31, Keangnam Hanoi Landmark Tower, PhÆ°á»ng YÃªn HÃ²a, ThÃ nh phá»‘ HÃ  Ná»™i, Viá»‡t Nam</p>
      <p>ğŸ“ (024) 3562 5939 - (024) 3562 5940</p>
    </div>

    <div class="footer-column">
      <h4>HÆ¯á»šNG DáºªN</h4>
      <a href="#">Vá» chÃºng tÃ´i</a>
      <a href="#">BÃ¡o giÃ¡ vÃ  há»— trá»£</a>
      <a href="#">CÃ¢u há»i thÆ°á»ng gáº·p</a>
      <a href="#">GÃ³p Ã½ bÃ¡o lá»—i</a>
      <a href="#">Sitemap</a>
    </div>

    <div class="footer-column">
      <h4>QUY Äá»ŠNH</h4>
      <a href="#">Quy Ä‘á»‹nh Ä‘Äƒng tin</a>
      <a href="#">Quy cháº¿ hoáº¡t Ä‘á»™ng</a>
      <a href="#">Äiá»u khoáº£n thá»a thuáº­n</a>
      <a href="#">ChÃ­nh sÃ¡ch báº£o máº­t</a>
      <a href="#">Giáº£i quyáº¿t khiáº¿u náº¡i</a>
    </div>

    <div class="footer-column">
      <h4>ÄÄ‚NG KÃ NHáº¬N TIN</h4>
      <div class="newsletter">
        <input type="email" placeholder="Nháº­p email cá»§a báº¡n">
        <button>â¤</button>
      </div>
      <h4 style="margin-top: 20px;">QUá»C GIA & NGÃ”N NGá»®</h4>
      <select class="language-select">
        <option>ğŸŒ Viá»‡t Nam</option>
      </select>
    </div>
  </div>

  <!-- Copyright -->
  <div class="footer-bottom">
    <p>Â© 2024 BatDongSanVIP. Táº¥t cáº£ quyá»n Ä‘Æ°á»£c báº£o lÆ°u.</p>
  </div>
</footer>