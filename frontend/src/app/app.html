<nav>
  <!-- Left: Brand Logo -->
  <a routerLink="/home" class="nav-brand">
    <img src="assets/logo.jpg" alt="BatDongSanVIP" class="nav-logo">
    <span class="brand-text">BatDongSan<span class="brand-vip">VIP</span></span>
  </a>

  <!-- Center: Empty -->
  <div class="nav-center"></div>

  <!-- Right: User Section -->

  <div class="nav-right">
    <!-- User Logged In -->
    <div *ngIf="currentUser$ | async as user; else guestNav" class="user-section">
      <!-- Quick Action Buttons -->
      <div class="quick-actions">
        <a routerLink="/news" class="action-btn action-btn-orange" title="Tin tá»©c BÄS">
          <span class="action-icon">ğŸ“°</span>
          <span class="action-text">Tin tá»©c</span>
        </a>
        <a routerLink="/my-properties" class="action-btn action-btn-green" title="Quáº£n lÃ½ BÄS">
          <span class="action-icon">ğŸ </span>
          <span class="action-text">Quáº£n lÃ½ BDS</span>
        </a>
        <a routerLink="/favorites" class="action-btn action-btn-red" title="Tin yÃªu thÃ­ch">
          <span class="action-icon">â¤ï¸</span>
          <span class="action-text">YÃªu thÃ­ch</span>
        </a>
        <a routerLink="/my-appointments" class="action-btn action-btn-purple" title="Lá»‹ch háº¹n">
          <span class="action-icon">ğŸ“…</span>
          <span class="action-text">Lá»‹ch háº¹n</span>
        </a>
      </div>

      <!-- Notification Bell -->
      <div class="notification-wrapper">
        <button class="notification-bell" (click)="toggleNotifications()" title="ThÃ´ng bÃ¡o lá»‹ch háº¹n">
          ğŸ””
          <span *ngIf="notificationCount > 0" class="notification-badge">{{ notificationCount }}</span>
        </button>

        <!-- Notification Dropdown -->
        <div *ngIf="showNotifications" class="notification-dropdown">
          <div class="notification-header">
            <h4>ğŸ“… Lá»‹ch háº¹n cá»§a báº¡n</h4>
            <button class="close-btn" (click)="closeNotifications()">âœ•</button>
          </div>
          <div class="notification-list">
            <div *ngIf="notifications.length === 0" class="no-notifications">
              ChÆ°a cÃ³ lá»‹ch háº¹n nÃ o
            </div>
            <div *ngFor="let apt of notifications" class="notification-item" [class.pending]="apt.status === 'pending'">
              <div class="notification-status">
                <span *ngIf="apt.status === 'pending'" class="status-badge pending">Chá» xÃ¡c nháº­n</span>
                <span *ngIf="apt.status === 'confirmed'" class="status-badge confirmed">ÄÃ£ xÃ¡c nháº­n</span>
                <span *ngIf="apt.status === 'completed'" class="status-badge completed">HoÃ n thÃ nh</span>
              </div>
              <div class="notification-content">
                <p class="apt-property">ğŸ  {{ apt.listing?.property?.title || apt.listing?.title || 'N/A' }}</p>
                <p class="apt-name">ğŸ‘¤ {{ apt.fullName }}</p>
                <p class="apt-phone">ğŸ“± {{ apt.phone }}</p>
                <p class="apt-date">ğŸ“… {{ apt.scheduledAt | date:'dd/MM/yyyy' }}</p>
                <p *ngIf="apt.message" class="apt-message">ğŸ’¬ {{ apt.message }}</p>
                <button *ngIf="apt.status === 'pending'" class="btn-confirm" (click)="confirmAppointment(apt.id!)">
                  âœ… XÃ¡c nháº­n
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- User Profile Section -->
      <div class="user-profile">
        <div class="user-info">
          <span class="user-name">{{ user.fullName }}</span>
          <span class="user-role">{{ (isAdmin$ | async) ? 'Admin' : 'ThÃ nh viÃªn' }}</span>
        </div>
        <a routerLink="/profile" class="avatar-link" title="Há»“ sÆ¡">
          <img [src]="user.avatar ? 'http://localhost:3000' + user.avatar : 'assets/default-avatar.png'"
            class="nav-avatar" alt="Avatar">
        </a>
        <button (click)="logout()" class="btn-logout" title="ÄÄƒng xuáº¥t">
          <span class="logout-icon">ğŸšª</span>
        </button>
      </div>
    </div>

    <!-- Guest -->
    <ng-template #guestNav>
      <div class="guest-actions">
        <a routerLink="/login" class="btn-auth btn-login">
          <span>ğŸ“</span> ÄÄƒng Nháº­p
        </a>
        <a routerLink="/register" class="btn-auth btn-register">
          <span>âœï¸</span> ÄÄƒng KÃ½
        </a>
      </div>
    </ng-template>
  </div>
</nav>

<!-- App Container with Sidebar -->
<div class="app-container">
  <!-- Admin Sidebar -->
  <aside *ngIf="isAdmin$ | async" class="admin-sidebar">
    <div class="sidebar-header">
      <span class="sidebar-icon">âš™ï¸</span>
      <span class="sidebar-title">Quáº£n trá»‹</span>
    </div>
    <nav class="sidebar-nav">
      <a routerLink="/admin/dashboard" routerLinkActive="active" class="sidebar-item">
        <span class="sidebar-item-icon">ğŸ“Š</span>
        <span class="sidebar-item-text">Dashboard</span>
      </a>
      <a routerLink="/admin/users" routerLinkActive="active" class="sidebar-item">
        <span class="sidebar-item-icon">ğŸ‘¥</span>
        <span class="sidebar-item-text">NgÆ°á»i dÃ¹ng</span>
      </a>
      <a routerLink="/admin/properties" routerLinkActive="active" class="sidebar-item">
        <span class="sidebar-item-icon">ğŸ“‹</span>
        <span class="sidebar-item-text">Tin Ä‘Äƒng</span>
      </a>
      <a routerLink="/admin/comments" routerLinkActive="active" class="sidebar-item">
        <span class="sidebar-item-icon">ğŸ’¬</span>
        <span class="sidebar-item-text">BÃ¬nh luáº­n</span>
      </a>
      <a routerLink="/admin/appointments" routerLinkActive="active" class="sidebar-item">
        <span class="sidebar-item-icon">ğŸ“…</span>
        <span class="sidebar-item-text">Lá»‹ch háº¹n</span>
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content" [class.with-sidebar]="isAdmin$ | async">
    <router-outlet></router-outlet>
  </main>
</div>

<!-- Footer -->
<footer class="footer">
  <!-- Top Bar -->
  <div class="footer-top">
    <div class="footer-brand">
      <span class="brand-icon">ğŸ¢</span>
      <span class="brand-name">BatDongSanVIP</span>
    </div>
    <div class="footer-contact-info">
      <div class="contact-item">
        <span class="contact-icon">ğŸ“</span>
        <div>
          <span class="contact-label">Hotline</span>
          <span class="contact-value">1900 1881</span>
        </div>
      </div>
      <div class="contact-item">
        <span class="contact-icon">ğŸ“§</span>
        <div>
          <span class="contact-label">Há»— trá»£ khÃ¡ch hÃ ng</span>
          <span class="contact-value">support&#64;bdsvip.com.vn</span>
        </div>
      </div>
      <div class="contact-item">
        <span class="contact-icon">ğŸ’¬</span>
        <div>
          <span class="contact-label">ChÄƒm sÃ³c khÃ¡ch hÃ ng</span>
          <span class="contact-value">hotro&#64;bdsvip.com.vn</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Footer -->
  <div class="footer-main">
    <div class="footer-column">
      <h4>CÃ”NG TY BÄS VIP VIá»†T NAM</h4>
      <p>ğŸ“ Táº§ng 31, Keangnam Hanoi Landmark Tower, PhÆ°á»ng YÃªn HÃ²a, ThÃ nh phá»‘ HÃ  Ná»™i, Viá»‡t Nam</p>
      <p>ğŸ“ (024) 3562 5939 - (024) 3562 5940</p>
    </div>

    <div class="footer-column">
      <h4>HÆ¯á»šNG DáºªN</h4>
      <a href="#">Vá» chÃºng tÃ´i</a>
      <a href="#">BÃ¡o giÃ¡ vÃ  há»— trá»£</a>
      <a href="#">CÃ¢u há»i thÆ°á»ng gáº·p</a>
      <a href="#">GÃ³p Ã½ bÃ¡o lá»—i</a>
      <a href="#">Sitemap</a>
    </div>

    <div class="footer-column">
      <h4>QUY Äá»ŠNH</h4>
      <a href="#">Quy Ä‘á»‹nh Ä‘Äƒng tin</a>
      <a href="#">Quy cháº¿ hoáº¡t Ä‘á»™ng</a>
      <a href="#">Äiá»u khoáº£n thá»a thuáº­n</a>
      <a href="#">ChÃ­nh sÃ¡ch báº£o máº­t</a>
      <a href="#">Giáº£i quyáº¿t khiáº¿u náº¡i</a>
    </div>

    <div class="footer-column">
      <h4>ÄÄ‚NG KÃ NHáº¬N TIN</h4>
      <div class="newsletter">
        <input type="email" placeholder="Nháº­p email cá»§a báº¡n">
        <button>â¤</button>
      </div>
      <h4 style="margin-top: 20px;">QUá»C GIA & NGÃ”N NGá»®</h4>
      <select class="language-select">
        <option>ğŸŒ Viá»‡t Nam</option>
      </select>
    </div>
  </div>

  <!-- Copyright -->
  <div class="footer-bottom">
    <p>Â© 2024 BatDongSanVIP. Táº¥t cáº£ quyá»n Ä‘Æ°á»£c báº£o lÆ°u.</p>
  </div>
</footer>