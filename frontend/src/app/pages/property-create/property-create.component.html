<div class="create-container">
    <h2>ƒêƒÉng Tin B·∫•t ƒê·ªông S·∫£n M·ªõi</h2>

    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

    <form (ngSubmit)="onSubmit()" #form="ngForm">
        <div class="form-row">
            <div class="form-group">
                <label>Ti√™u ƒë·ªÅ tin *</label>
                <input type="text" [(ngModel)]="property.title" name="title" required class="form-control"
                    placeholder="VD: Nh√† ph·ªë 3 t·∫ßng Qu·∫≠n 7">
            </div>
        </div>

        <div class="form-row two-columns">
            <div class="form-group">
                <label>Lo·∫°i giao d·ªãch *</label>
                <select [(ngModel)]="property.listingTypeId" name="listingTypeId" required class="form-control">
                    <option [ngValue]="null">-- Ch·ªçn lo·∫°i --</option>
                    <option *ngFor="let lt of listingTypes" [ngValue]="lt.id">{{ lt.name }}</option>
                </select>
            </div>

            <div class="form-group">
                <label>Lo·∫°i BƒêS *</label>
                <select [(ngModel)]="property.typeId" name="typeId" required class="form-control">
                    <option [ngValue]="null">-- Ch·ªçn lo·∫°i BƒêS --</option>
                    <option *ngFor="let pt of propertyTypes" [ngValue]="pt.id">{{ pt.name }}</option>
                </select>
            </div>
        </div>

        <div class="form-row two-columns">
            <div class="form-group">
                <label>T·ªânh/Th√†nh ph·ªë *</label>
                <select [(ngModel)]="selectedCityId" name="cityId" (ngModelChange)="onCityChange()" required
                    class="form-control">
                    <option [ngValue]="null">-- Ch·ªçn th√†nh ph·ªë --</option>
                    <option *ngFor="let city of cities" [ngValue]="city.id">{{ city.name }}</option>
                </select>
            </div>

            <div class="form-group">
                <label>Qu·∫≠n/Huy·ªán *</label>
                <select [(ngModel)]="property.districtId" name="districtId" required class="form-control"
                    [disabled]="!selectedCityId">
                    <option [ngValue]="null">-- Ch·ªçn qu·∫≠n/huy·ªán --</option>
                    <option *ngFor="let d of districts" [ngValue]="d.id">{{ d.name }}</option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>ƒê·ªãa ch·ªâ c·ª• th·ªÉ *</label>
                <input type="text" [(ngModel)]="property.address" name="address" required class="form-control"
                    placeholder="S·ªë nh√†, t√™n ƒë∆∞·ªùng">
            </div>
        </div>

        <div class="form-row two-columns">
            <div class="form-group">
                <label>M·ª©c gi√° (VND) *</label>
                <input type="number" [(ngModel)]="property.price" name="price" required class="form-control">
            </div>

            <div class="form-group">
                <label>Di·ªán t√≠ch (m¬≤) *</label>
                <input type="number" [(ngModel)]="property.area" name="area" required class="form-control">
            </div>
        </div>

        <div class="form-row two-columns">
            <div class="form-group">
                <label>S·ªë ph√≤ng ng·ªß</label>
                <input type="number" [(ngModel)]="property.bedrooms" name="bedrooms" class="form-control" min="0">
            </div>

            <div class="form-group">
                <label>S·ªë ph√≤ng t·∫Øm</label>
                <input type="number" [(ngModel)]="property.bathrooms" name="bathrooms" class="form-control" min="0">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>M√¥ t·∫£ chi ti·∫øt</label>
                <textarea [(ngModel)]="property.description" name="description" rows="5" class="form-control"
                    placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ b·∫•t ƒë·ªông s·∫£n..."></textarea>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>H√¨nh ·∫£nh m√¥ t·∫£</label>
                <input type="file" (change)="onFileSelected($event)" accept="image/*" class="form-control-file">
            </div>
        </div>

        <div class="actions">
            <button type="submit" [disabled]="!form.valid || loading" class="btn btn-primary">
                {{ loading ? 'ƒêang x·ª≠ l√Ω...' : 'üì§ ƒêƒÉng Tin' }}
            </button>
            <button type="button" (click)="cancel()" class="btn btn-secondary">H·ªßy</button>
        </div>
    </form>
</div>